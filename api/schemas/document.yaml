Document:
  type: object
  required:
    - id
    - object
    - title
    - access_level
    - processing_status
    - created_at
    - updated_at
  properties:
    id:
      type: string
      pattern: '^doc_[0-9a-hjkmnp-tv-z]{26}$'
      description: Unique document identifier (TypeID format)
      example: doc_01h2xcejqtf2nbrexx3vqjhp41
    object:
      type: string
      enum: [document]
      description: Object type identifier
    title:
      type: string
      minLength: 1
      maxLength: 255
      description: Document title
      example: Q4 Financial Report
    description:
      type: [string, "null"]
      maxLength: 2000
      description: Optional document description
      example: Annual financial report for Q4 2024
    access_level:
      type: string
      enum:
        - private
        - organization
        - restricted
        - authenticated
        - public
      description: |
        Document access level:
        - `private`: Only document creator
        - `organization`: Only organization members
        - `restricted`: Specific users/groups
        - `authenticated`: Any authenticated user
        - `public`: Anyone with the link
      default: private
      example: organization
    processing_status:
      type: string
      enum: [pending, processing, ready, failed]
      description: |
        Document processing status:
        - `pending`: Queued for processing
        - `processing`: Currently being processed
        - `ready`: Fully processed and available
        - `failed`: Processing error occurred
      example: ready
    current_version:
      $ref: './version.yaml#/VersionSummary'
    policy_ids:
      type: array
      description: IDs of policies attached to this document
      items:
        type: string
        pattern: '^pol_[0-9a-hjkmnp-tv-z]{26}$'
      example: ["pol_01h2xcej8mf2nbrexx3vqjhp42", "pol_01h2xcek4tf2nbrexx3vqjhp43"]
    created_by:
      type: [string, "null"]
      description: User ID who created this document
      example: user_01h2xcejqtf2nbrexx3vqjhp44
    properties:
      type: object
      additionalProperties: true
      description: Custom key-value metadata
      example:
        department: finance
        author: john@example.com
    document_date:
      type: [integer, "null"]
      format: int64
      description: |
        Date shown on the document itself (from current version).
        Convenience field - same as current_version.document_date.
        Null if not yet extracted or not applicable.
      example: 1704067200
    created_at:
      type: integer
      format: int64
      description: Unix timestamp when document record was created in Factify
      example: 1234567890
    updated_at:
      type: integer
      format: int64
      description: Unix timestamp when document was last updated
      example: 1234567899

DocumentList:
  type: object
  required:
    - object
    - data
    - has_more
  properties:
    object:
      type: string
      enum: [list]
    data:
      type: array
      items:
        $ref: '#/Document'
    has_more:
      type: boolean
      description: Whether more results are available
    next_cursor:
      type: [string, "null"]
      description: Opaque cursor for next page of results

DocumentCreate:
  type: object
  required:
    - title
    - content
  properties:
    title:
      type: string
      minLength: 1
      maxLength: 255
    description:
      type: string
      maxLength: 2000
    access_level:
      type: string
      enum: [organization, restricted, authenticated, public]
      default: organization
    content:
      type: string
      description: Initial document content
    metadata:
      type: object
      additionalProperties: true

DocumentUpdate:
  type: object
  properties:
    title:
      type: string
      minLength: 1
      maxLength: 255
    description:
      type: string
      maxLength: 2000
    properties:
      type: object
      additionalProperties: true
      description: Custom key-value metadata

DocumentAccessUpdate:
  type: object
  required:
    - access_level
  properties:
    access_level:
      type: string
      enum: [organization, restricted, authenticated, public]
