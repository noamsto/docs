Version:
  type: object
  required:
    - id
    - object
    - document_id
    - version_number
    - processing_status
    - created_at
  properties:
    id:
      type: string
      pattern: '^ver_[a-zA-Z0-9]+$'
      example: ver_xyz789
    object:
      type: string
      enum: [version]
    document_id:
      type: string
      pattern: '^doc_[a-zA-Z0-9]+$'
      example: doc_abc123
    version_number:
      type: integer
      minimum: 1
      example: 3
    processing_status:
      type: string
      enum: [pending, processing, ready, failed]
      description: |
        Processing status of the version:
        - `pending`: Queued for processing
        - `processing`: Currently being processed
        - `ready`: Fully processed and available
        - `failed`: Processing error occurred
      example: ready
    content_url:
      type: [string, "null"]
      format: uri
      description: |
        URL to download processed content.
        Null when processing_status is pending/processing.
      example: https://cdn.factify.com/documents/doc_abc123/versions/ver_xyz789.pdf
    content_type:
      type: [string, "null"]
      description: MIME type of the content
      enum: [application/pdf, text/markdown, text/html, application/json, null]
      example: application/pdf
    content_size_bytes:
      type: [integer, "null"]
      description: File size in bytes
      example: 2458624
    page_count:
      type: [integer, "null"]
      description: Number of pages (for PDF/paginated formats)
      example: 12
    document_date:
      type: [integer, "null"]
      format: int64
      description: |
        Date shown on the document itself (not system upload date).
        Extracted from document content during processing.
        Null if not yet extracted or not applicable.
      example: 1704067200
    content_hash:
      type: [string, "null"]
      description: SHA-256 hash for content integrity verification
      example: a3c8f9e2b1d4c7a6f5e8d9c0b3a2f1e0d4c7b6a5f8e9d0c3b2a1f0e9d8c7b6a5
    change_summary:
      type: [string, "null"]
      description: Summary of changes in this version
      example: Updated financial figures
    created_by:
      type: [string, "null"]
      description: User ID who created this version
    metadata:
      type: object
      additionalProperties: true
      description: Custom metadata key-value pairs
    created_at:
      type: integer
      format: int64
      description: Unix timestamp when version was created
      example: 1234567895

VersionSummary:
  type: object
  required:
    - id
    - version_number
    - processing_status
    - created_at
  properties:
    id:
      type: string
      pattern: '^ver_[a-zA-Z0-9]+$'
    version_number:
      type: integer
      minimum: 1
    processing_status:
      type: string
      enum: [pending, processing, ready, failed]
      description: Processing status of the version
    content_url:
      type: [string, "null"]
      format: uri
      description: URL to download processed content (null if not ready)
    content_type:
      type: [string, "null"]
      description: MIME type of the content
    content_size_bytes:
      type: [integer, "null"]
      description: File size in bytes
    page_count:
      type: [integer, "null"]
      description: Number of pages (for paginated formats)
    document_date:
      type: [integer, "null"]
      format: int64
      description: Date shown on the document itself (extracted during processing)
    created_at:
      type: integer
      format: int64

VersionList:
  type: object
  required:
    - object
    - data
    - has_more
  properties:
    object:
      type: string
      enum: [list]
    data:
      type: array
      items:
        $ref: '#/Version'
    has_more:
      type: boolean
    next_cursor:
      type: [string, "null"]

VersionCreate:
  type: object
  required:
    - document_id
    - content
  properties:
    document_id:
      type: string
      pattern: '^doc_[a-zA-Z0-9]+$'
    content:
      type: string
    change_summary:
      type: string

VersionUpdate:
  type: object
  properties:
    change_summary:
      type: string
    metadata:
      type: object
      additionalProperties: true
